stages:
  # - build
  # - test
  - deploy

# build:
#   stage: build
#   script:
#     - 

# test:
#   stage: test
#   script:
#     - 

deploy-vm:
  stage: deploy
  script:
    - fuser -k 80/tcp || true
    - docker stop backendcontainer || true
    - docker rm backendcontainer || true
    - docker build -t backendimage tarefaConnectBackend/
    - docker run -d --name backendcontainer -p 80:80 backendimage

#deploy-heroku:
#  image: ruby:latest
#  stage: deploy
#  before_script:
#    - gem install dpl
#  script:
#    - dpl --provider=heroku --app=$HEROKU_APP --api-key=$HEROKU_KEY
#  only:
#    - master
